import { createQueryStore as createCoreQueryStore } from "@sanity/core-loader";
export const createQueryStore = (visualEditing, client, tag) => {
  if (!visualEditing) return void 0;
  const queryStore = createCoreQueryStore({
    tag: tag || "nuxt-loader",
    client: false,
    ssr: true
  });
  if (import.meta.server) {
    const serverClient = client.withConfig({
      perspective: "previewDrafts",
      token: visualEditing?.token,
      useCdn: false
    });
    queryStore.setServerClient(serverClient);
  }
  return queryStore;
};

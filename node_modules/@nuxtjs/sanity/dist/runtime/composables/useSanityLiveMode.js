import { onScopeDispose } from "vue";
import { useSanity } from "./useSanity.js";
import { useSanityConfig } from "./useSanityConfig.js";
export function useSanityLiveMode(options) {
  const config = useSanityConfig();
  if (!config.visualEditing) {
    throw new Error("Configure the `sanity.visualEditing` property in your `nuxt.config.ts` to use the `useSanityLiveMode` composable. ");
  }
  const { client = "default" } = options || {};
  let disable = () => {
  };
  if (import.meta.client) {
    const sanity = useSanity(client);
    if (sanity.queryStore) {
      disable = sanity.queryStore.enableLiveMode({
        client: sanity.client
      });
    }
  }
  onScopeDispose(disable);
  return disable;
}
